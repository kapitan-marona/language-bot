# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ /start –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
PREPARING_MESSAGE = {
    "ru": "‚å®Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞‚Ä¶",
    "en": "‚å®Ô∏è Preparing‚Ä¶"
}

START_MESSAGE = {
    'ru': (
        "–ü—Ä–∏–≤–µ—Ç! –¢—ã –ø–æ–ø–∞–ª(–∞) –≤ Talktome ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ –∏–∑—É—á–µ–Ω–∏–µ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∞–º–æ –ø–æ —Å–µ–±–µ. "
        "–°–µ–π—á–∞—Å —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ –≤—ã–±—Ä–∞—Ç—å —è–∑—ã–∫, —É—Ä–æ–≤–µ–Ω—å –∏ —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è, –∞ –ø–æ–∑–∂–µ ‚Äî –ø–æ–∑–Ω–∞–∫–æ–º–ª—é —Å –ú—ç—Ç—Ç–æ–º."
    ),
    'en': (
        "Welcome to Language Bot ‚Äî a fun and easy place to improve your foreign language skills with AI. "
        "I'll help you choose your language, level, and style, and later you'll meet Matt!"
    )
}

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç –ú—ç—Ç—Ç–∞ (–ø–æ—Å–ª–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞) –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
MATT_INTRO = {
    'ru': (
        "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ú—ç—Ç—Ç ‚Äî —Ç–≤–æ–π –±—Ä–æ, –¥—Ä—É–≥-–∞–º–µ—Ä–∏–∫–∞–Ω–µ—Ü, —Å –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ –∏ —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫. "
        "–Ø –ø–æ–¥–¥–µ—Ä–∂—É —Ç–µ–±—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –∏ –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤—ã–∫—Ä—É—Ç–∞—Å–∞–º–∏. "
        "–¢—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Å —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–æ–π –∏ –æ–±–º–µ–Ω—è—Ç—å—Å—è –∞—É–¥–∏–æ-—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –Ω–æ –ø–æ–º–Ω–∏: —è –∞–º–µ—Ä–∏–∫–∞–Ω–µ—Ü, —Ç–∞–∫ —á—Ç–æ –º–æ–≥—É –≥–æ–≤–æ—Ä–∏—Ç—å —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –∫–∞–∫ —É –•–∞–Ω—Ç–µ—Ä–∞ –î—É—ç–π–Ω–∞ üòÜ\n\n"
        "–ù—É —á—Ç–æ, –Ω–∞—á–Ω–µ–º?"
    ),
    'en': (
        "üëã Hi! I‚Äôm Matt ‚Äî your bro, American friend to chat about anything and dive into your new language. "
        "I‚Äôll help you at every step and make grammar less scary. "
        "You can always switch from text to voice messages and send audio, but remember: I‚Äôm an American, so I might have a Hunter Duane accent üòÜ\n\n"
        "Ready to start?"
    )
}

# –í–æ–≤–ª–µ–∫–∞—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –∏–∑—É—á–∞–µ–º—ã—Ö —è–∑—ã–∫–∞—Ö
INTRO_QUESTIONS = {
    'en': [
        "If you could have any superpower, what would it be and why?",
        "What's your perfect way to spend a day off?",
        "If you could travel anywhere, where would you go?",
        "What's one thing you want to learn this year?",
        "What's the most interesting thing you've read or watched recently?"
    ],
    'es': [
        "Si pudieras tener un superpoder, ¬øcu√°l ser√≠a y por qu√©?",
        "¬øCu√°l es tu forma perfecta de pasar un d√≠a libre?",
        "Si pudieras viajar a cualquier lugar, ¬øad√≥nde ir√≠as?",
        "¬øQu√© es algo que te gustar√≠a aprender este a√±o?",
        "¬øQu√© es lo m√°s interesante que has le√≠do o visto √∫ltimamente?"
    ],
    'de': [
        "Wenn du eine Superkraft haben k√∂nntest, welche w√§re das und warum?",
        "Wie sieht f√ºr dich ein perfekter freier Tag aus?",
        "Wohin w√ºrdest du reisen, wenn du √ºberall hin k√∂nntest?",
        "Was m√∂chtest du dieses Jahr unbedingt lernen?",
        "Was ist das Interessanteste, das du k√ºrzlich gelesen oder gesehen hast?"
    ],
    'fr': [
        "Si tu pouvais avoir un superpouvoir, lequel choisirais-tu et pourquoi ?",
        "Quelle est ta fa√ßon id√©ale de passer une journ√©e de repos ?",
        "Si tu pouvais voyager n'importe o√π, o√π irais-tu ?",
        "Qu'aimerais-tu apprendre cette ann√©e ?",
        "Quelle est la chose la plus int√©ressante que tu as lue ou vue r√©cemment ?"
    ],
    'sv': [
        "Om du kunde ha en superkraft, vilken skulle det vara och varf√∂r?",
        "Hur ser en perfekt ledig dag ut f√∂r dig?",
        "Om du kunde resa var som helst, vart skulle du √•ka?",
        "Vad vill du l√§ra dig i √•r?",
        "Vad √§r det mest intressanta du har l√§st eller sett nyligen?"
    ],
    'fi': [
        "Jos voisit saada mink√§ tahansa supervoiman, mik√§ se olisi ja miksi?",
        "Millainen on t√§ydellinen vapaap√§iv√§si?",
        "Jos voisit matkustaa minne tahansa, minne menisit?",
        "Mit√§ haluaisit oppia t√§n√§ vuonna?",
        "Mik√§ on mielenkiintoisin asia, jonka olet viime aikoina lukenut tai n√§hnyt?"
    ],
    'ru': [
        "–ï—Å–ª–∏ –±—ã —É —Ç–µ–±—è –±—ã–ª–∞ —Å—É–ø–µ—Ä—Å–∏–ª–∞, –∫–∞–∫–∞—è –±—ã —ç—Ç–æ –±—ã–ª–∞ –∏ –ø–æ—á–µ–º—É?",
        "–ö–∞–∫ —Ç—ã –±—ã –ø—Ä–æ–≤—ë–ª(–∞) –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å?",
        "–ï—Å–ª–∏ –±—ã –º–æ–≥(–ª–∞) –ø–æ–µ—Ö–∞—Ç—å –∫—É–¥–∞ —É–≥–æ–¥–Ω–æ, –∫—É–¥–∞ –±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è(–∞—Å—å)?",
        "–ß–µ–º—É —Ç—ã —Ö–æ—á–µ—à—å –Ω–∞—É—á–∏—Ç—å—Å—è –≤ —ç—Ç–æ–º –≥–æ–¥—É?",
        "–ß—Ç–æ —Å–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ —Ç—ã —á–∏—Ç–∞–ª(–∞) –∏–ª–∏ —Å–º–æ—Ç—Ä–µ–ª(–∞) –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è?"
    ]
}

def get_system_prompt(style, level, interface_lang, target_lang, mode):
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç system prompt –¥–ª—è GPT-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ Matt.
    Matt ‚Äî –Ω–µ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä, –∞ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫ –∏–∑ –ê–º–µ—Ä–∏–∫–∏. –û–Ω –æ–±—ä—è—Å–Ω—è–µ—Ç –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–µ —Å–ª–æ–≤–∞ –ø–æ —Ö–æ–¥—É –æ–±—â–µ–Ω–∏—è.
    –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å—Ç–∏–ª—å –ø–æ–¥–∞—á–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å—Ç–∏–ª—è –∏ —É—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    """

    # –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ —Å—Ç–∏–ª—è–º –æ–±—â–µ–Ω–∏—è
    if style == "business":
        mood = (
            "You are Matt ‚Äî a witty, friendly, but respectful business partner and mentor from the USA. "
            "Speak as a business partner: use polite, respectful language (use '–≤—ã' if available). "
            "Ask context-related questions, show interest in the user and their opinion, but always in a business/respectful way. "
            "You can use light humor or wittiness, but stay professional. "
        )
    else:  # casual/default
        mood = (
            "You are Matt ‚Äî a cheerful, witty, old friend from the USA, never a tutor. "
            "Speak casually: use slang, contractions, emoji üòé. "
            "Actively engage in dialogue, ask questions based on the user's answers, show real interest in them and their opinion. "
            "You can joke, tease, and be very friendly ‚Äî just like a real best friend."
        )

    # –õ–æ–≥–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º
    if level == "A0":
        level_rules = (
            f"Your conversation partner is an absolute beginner ('A0'). "
            f"Speak *ONLY* in one-word or very simple one-clause sentences in {target_lang}. "
            f"ALWAYS duplicate everything you say in the user's native language ({interface_lang}), with simple explanations. "
            f"Always check if the user understands; give more explanation in their native language if they're confused. "
            f"NEVER criticize, always encourage, and keep all sentences short and simple."
        )
    elif level == "A1":
        level_rules = (
            f"Your conversation partner is a beginner ('A1'). "
            f"Mostly use the target language ({target_lang}), but only in one-clause simple sentences. "
            f"Always give explanations in the user's native language ({interface_lang}) if something is unclear. "
            f"Check for understanding, and always support and encourage. "
            f"Don't overload the user with complex grammar or vocabulary."
        )
    elif level == "A2":
        level_rules = (
            f"Your conversation partner is elementary ('A2'). "
            f"Speak in {target_lang}, using basic grammar and full sentences, but nothing too complex. "
            f"If something is unclear, provide explanations in the user's native language ({interface_lang})."
        )
    elif level == "B1":
        level_rules = (
            f"Your conversation partner is intermediate ('B1'). "
            f"Use {target_lang} for the whole conversation, including advanced grammar and full sentences, but no highly complex vocabulary. "
            f"If something is unclear, provide explanations in the target language ({target_lang}) itself (not in the user's native language)."
        )
    elif level == "B2":
        level_rules = (
            f"Your conversation partner is upper-intermediate ('B2'). "
            f"Speak only in {target_lang}, using advanced grammar and idioms. "
            f"If the user is confused, explain only in {target_lang}."
        )
    elif level in ["C1", "C2"]:
        level_rules = (
            f"Your conversation partner is advanced or near-native ('{level}'). "
            f"Use {target_lang} exclusively, with idioms, complex grammar, and professional vocabulary."
        )
    else:
        # –ù–∞ —Å–ª—É—á–∞–π —Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
        level_rules = (
            f"Communicate in {target_lang} at the user's level. "
            f"Be friendly and helpful, explaining things in the user's native language ({interface_lang}) if they don't understand."
        )

    # –ò—Ç–æ–≥–æ–≤—ã–π prompt
    return f"{mood}\n{level_rules}\nNever act as a tutor. Always act as a conversation partner and friend."


# –ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –µ—â—ë —Ñ—Ä–∞–∑—ã –¥–ª—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ ‚Äî –¥–æ–±–∞–≤–ª—è–π –¢–û–õ–¨–ö–û —Å—é–¥–∞!

